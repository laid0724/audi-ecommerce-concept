<div class="main-container">
  <header class="header header-1">
    <div class="branding">
      <a [routerLink]="['/manage/home']">
        <img src="assets/audi-logo-white.svg" class="audi-logo" />
      </a>
    </div>
    <div class="header-actions">
      <clr-dropdown>
        <button class="nav-text" clrDropdownTrigger>
          <ng-container *ngIf="user">
            {{ user.email }}
          </ng-container>
          <clr-icon
            shape="administrator"
            size="sm"
            class="ms-1"
            style="margin-bottom: 3px"
          ></clr-icon>
        </button>
        <clr-dropdown-menu *clrIfOpen clrPosition="bottom-right">
          <a clrDropdownItem (click)="changePwModalOpen = true">
            更改密碼 Change Password</a
          >
          <a clrDropdownItem (click)="changePersonalInfoModalOpen = true">
            更改個人資訊 Change Personal Info</a
          >
          <a clrDropdownItem (click)="logout()">登出 Logout</a>
        </clr-dropdown-menu>
      </clr-dropdown>
    </div>
  </header>
  <div class="content-container">
    <div class="content-area">
      <router-outlet></router-outlet>
    </div>
    <clr-vertical-nav
      [clrVerticalNavCollapsible]="true"
      [clrVerticalNavCollapsed]="true"
    >
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="home"></clr-icon>
        首頁 Homepage
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a clrVerticalNavLink routerLink="/manage" routerLinkActive="active">
            TBD
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="shopping-cart"></clr-icon>
        產品 Products
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a
            clrVerticalNavLink
            routerLink="/manage/products/categories"
            routerLinkActive="active"
          >
            分類管理 Categories
          </a>
          <a
            clrVerticalNavLink
            routerLink="/manage/products/items"
            routerLinkActive="active"
          >
            產品管理 Products
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="users"></clr-icon>
        會員 Members
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a clrVerticalNavLink routerLink="/manage" routerLinkActive="active">
            TBD
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="truck"></clr-icon>
        訂單 Orders
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a clrVerticalNavLink routerLink="/manage" routerLinkActive="active">
            TBD
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="new"></clr-icon>
        新聞 News
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a
            clrVerticalNavLink
            routerLink="/manage/news/list"
            routerLinkActive="active"
          >
            列表 List
          </a>
          <a
            clrVerticalNavLink
            routerLink="/manage/news/new"
            routerLinkActive="active"
          >
            新增 Add
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="event"></clr-icon>
        活動 Events
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a
            clrVerticalNavLink
            routerLink="/manage/events/list"
            routerLinkActive="active"
          >
            列表 List
          </a>
          <a
            clrVerticalNavLink
            routerLink="/manage/events/new"
            routerLinkActive="active"
          >
            新增 Add
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="help-info"></clr-icon>
        疑難雜症 FAQs
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a
            clrVerticalNavLink
            routerLink="/manage/faq"
            routerLinkActive="active"
          >
            編輯 Edit
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="envelope"></clr-icon>
        信箱 Inbox
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a clrVerticalNavLink routerLink="/manage" routerLinkActive="active">
            TBD
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
      <clr-vertical-nav-group routerLinkActive="active">
        <clr-icon clrVerticalNavIcon shape="talk-bubbles"></clr-icon>
        線上客服 Live Chat
        <clr-vertical-nav-group-children *clrIfExpanded="false">
          <a clrVerticalNavLink routerLink="/manage" routerLinkActive="active">
            TBD
          </a>
        </clr-vertical-nav-group-children>
      </clr-vertical-nav-group>
    </clr-vertical-nav>
  </div>
</div>

<clr-modal [(clrModalOpen)]="changePwModalOpen" [clrModalClosable]="false">
  <h3 class="modal-title">更改密碼 Change Password</h3>
  <div class="modal-body" *ngIf="changePwForm">
    <form
      clrForm
      [formGroup]="changePwForm"
      clrLayout="vertical"
      #changePwClrForm
    >
      <clr-password-container>
        <label>目前密碼 Current Password</label>
        <input type="password" clrPassword formControlName="currentPassword" />
        <clr-control-error *clrIfError="'required'"
          >必填 Required</clr-control-error
        >
        <clr-control-error *clrIfError="'minlength'"
          >密碼需至少8位數 Password must be at least 8
          characters</clr-control-error
        >
      </clr-password-container>
      <clr-password-container>
        <label>新密碼 New Password</label>
        <input type="password" clrPassword formControlName="newPassword" />
        <clr-control-error *clrIfError="'required'"
          >必填 Required</clr-control-error
        >
        <clr-control-error *clrIfError="'minlength'"
          >密碼需至少8位數 Password must be at least 8
          characters</clr-control-error
        >
      </clr-password-container>
      <clr-password-container>
        <label>確認新密碼 Confirm New Password</label>
        <input
          type="password"
          clrPassword
          formControlName="confirmNewPassword"
        />
        <clr-control-error *clrIfError="'required'"
          >必填 Required</clr-control-error
        >
        <clr-control-error *clrIfError="'minlength'"
          >密碼需至少8位數 Password must be at least 8
          characters</clr-control-error
        >
        <clr-control-error *clrIfError="'isNotSameValue'"
          >與新密碼不符 Passwords do not match</clr-control-error
        >
      </clr-password-container>
    </form>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-primary-outline"
      (click)="changePwModalOpen = false"
    >
      取消 Cancel
    </button>
    <button
      [clrLoading]="changePwBtnState"
      type="button"
      class="btn btn-primary"
      (click)="submitChangePw()"
    >
      確認 Ok
    </button>
  </div>
</clr-modal>

<clr-modal
  [(clrModalOpen)]="changePersonalInfoModalOpen"
  [clrModalClosable]="false"
>
  <h3 class="modal-title">更改個人資訊 Change Personal Info</h3>
  <div class="modal-body" *ngIf="changePersonalInfoForm">
    <form
      clrForm
      [formGroup]="changePersonalInfoForm"
      clrLayout="vertical"
      #changePersonalInfoClrForm
    >
      <clr-input-container class="mt-0">
        <label>姓氏 Last Name</label>
        <input type="text" clrInput formControlName="lastName" />
        <clr-control-error *clrIfError="'required'"
          >必填 Required</clr-control-error
        >
      </clr-input-container>
      <clr-input-container>
        <label>名字 First Name</label>
        <input type="text" clrInput formControlName="firstName" />
        <clr-control-error *clrIfError="'required'"
          >必填 Required</clr-control-error
        >
      </clr-input-container>
      <clr-radio-container>
        <label>性別 Gender</label>
        <clr-radio-wrapper *ngFor="let gender of ['male', 'female', 'other']">
          <input
            type="radio"
            clrRadio
            formControlName="gender"
            [value]="gender"
          />
          <label>{{ gender | toZh: 'genderWithEn' }}</label>
        </clr-radio-wrapper>
        <clr-control-error *clrIfError="'required'"
          >必填 Required</clr-control-error
        >
      </clr-radio-container>
      <clr-input-container>
        <label>電話 Phone Number</label>
        <input type="text" clrInput formControlName="phoneNumber" />
        <clr-control-error *clrIfError="'required'"
          >必填 Required</clr-control-error
        >
        <clr-control-error *clrIfError="'pattern'"
          >請填寫正確的電話號碼 Please enter a valid phone
          number</clr-control-error
        >
      </clr-input-container>
    </form>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-primary-outline"
      (click)="changePersonalInfoModalOpen = false"
    >
      取消 Cancel
    </button>
    <button
      [clrLoading]="changePersonalInfoBtnState"
      type="button"
      class="btn btn-primary"
      (click)="submitChangePersonalInfo()"
    >
      確認 Ok
    </button>
  </div>
</clr-modal>
